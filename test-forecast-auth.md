# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–ª—è Forecast —Å—Ç–æ—Ä—ñ–Ω–∫–∏

## –°—Ü–µ–Ω–∞—Ä—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

### 1. –ì—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–ø–µ—Ä—à–∏–π —Ä–∞–∑)

- –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/AA100`
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
  - –í—ñ–¥–Ω—ñ–º–∞—î—Ç—å—Å—è 1 –∑–∞–ø–∏—Ç –∑ localStorage
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä–æ–≥–Ω–æ–∑ —Ç—É—Ä–±—É–ª–µ–Ω—Ç–Ω–æ—Å—Ç—ñ

### 2. –ì—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–¥—Ä—É–≥–∏–π —Ä–∞–∑)

- –ü—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∑–∞–ø–∏—Ç—É, –≤—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/UA2457`
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è AuthModal –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
  - –ó–∞–ø–∏—Ç –ù–ï –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
  - –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ù–ï –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è

### 3. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–∑ —Ç–æ–∫–µ–Ω–∞–º–∏)

- –£–≤—ñ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/AA100`
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
  - –í—ñ–¥–Ω—ñ–º–∞—î—Ç—å—Å—è 3 —Ç–æ–∫–µ–Ω–∏ –∑ –∞–∫–∞—É–Ω—Ç—É
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä–æ–≥–Ω–æ–∑ —Ç—É—Ä–±—É–ª–µ–Ω—Ç–Ω–æ—Å—Ç—ñ

### 4. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–±–µ–∑ —Ç–æ–∫–µ–Ω—ñ–≤)

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≤—Å—ñ —Ç–æ–∫–µ–Ω–∏
- –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/AA100`
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–ª–∞–Ω—É
  - –ó–∞–ø–∏—Ç –ù–ï –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
  - –¢–æ–∫–µ–Ω–∏ –ù–ï –≤—ñ–¥–Ω—ñ–º–∞—é—Ç—å—Å—è

### 5. –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ä–µ–π—Å—É

- –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/AA000000000` (–∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π)
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è "Invalid Flight Number" –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏
  - –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π –∫–æ–ª—ñ—Ä (warning)
  - –ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤

### 6. –ù–µ—ñ—Å–Ω—É—é—á–∏–π —Ä–µ–π—Å

- –í—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:3000/forecast/ZZ999`
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è "Flight Not Found"
  - –°–∏–Ω—ñ–π –∫–æ–ª—ñ—Ä (info)
  - –ö–Ω–æ–ø–∫–∞ "Check Flight Status" ‚Üí FlightRadar24

### 7. –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ —Ñ–æ—Ä–º—ñ

- –í—ñ–¥–∫—Ä–∏—Ç–∏ `/turbulence`
- –í–≤–µ—Å—Ç–∏ `A1` (–∑–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–æ)
- **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
  - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
  - –§–æ—Ä–º–∞ –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è
  - –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –≤–≤–µ–¥–µ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∞ –∑–Ω–∏–∫–∞—î

## –õ–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

### –í –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞ –º–∞—î –∑'—è–≤–ª—è—Ç–∏—Å—è:

```
üîê Checking authorization for forecast AA100: {user: 'guest', canMakeRequest: true, isHydrated: true}
‚úÖ User authorized for AA100, proceeding with fetch
üöÄ Starting forecast fetch for AA100...
‚úÖ Forecast data received for AA100: {loading: false, hasForecast: true, severity: "smooth"}
üìä Incrementing guest turbulence count for AA100...
‚úÖ Guest turbulence count incremented successfully
```

### –î–ª—è –≥–æ—Å—Ç—è –±–µ–∑ –ª—ñ–º—ñ—Ç—ñ–≤:

```
üîê Checking authorization for forecast AA100: {user: 'guest', canMakeRequest: false, isHydrated: true}
üö´ Guest user limit reached for AA100, showing auth modal
```

### –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω—ñ–≤:

```
üîê Checking authorization for forecast AA100: {user: 'authenticated', canMakeRequest: false, isHydrated: true}
üö´ Authenticated user limit reached for AA100
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ localStorage:

### –î–ª—è –≥–æ—Å—Ç—è:

```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω
localStorage.getItem("larry_guest_turbulence");

// –û—á–∏—Å—Ç–∏—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
localStorage.removeItem("larry_guest_turbulence");
```

## API –ª–æ–≥—É–≤–∞–Ω–Ω—è:

### –í —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –ª–æ–≥–∞—Ö –º–∞—î –∑'—è–≤–ª—è—Ç–∏—Å—è:

```
üöÄ POST /api/turbulence - Request body: {"flightNumber":"AA100"}
üîë Cache key: AA100
‚ö° Returning basic flight info immediately for AA100
üîç Getting basic flight info for AA100...
üí• Cache MISS for basic flight info: AA100
üîç Fetching AeroDataBox data for AA100...
‚úÖ AeroDataBox API call for AA100: 1250ms
```

## –ü—Ä–æ–±–ª–µ–º–∏ —è–∫—ñ –±—É–ª–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ:

1. ‚ùå **–ë—É–ª–æ:** –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω—É–≤–∞–≤—Å—è –æ–¥—Ä–∞–∑—É –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
2. ‚úÖ **–°—Ç–∞–ª–æ:** –°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —Ç–∞ –ª—ñ–º—ñ—Ç–∏

3. ‚ùå **–ë—É–ª–æ:** –ì—ñ—Å—Ç—å –º—ñ–≥ —Ä–æ–±–∏—Ç–∏ –Ω–µ–æ–±–º–µ–∂–µ–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤
4. ‚úÖ **–°—Ç–∞–ª–æ:** –ì—ñ—Å—Ç—å –º–∞—î –ª–∏—à–µ 1 –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∑–∞–ø–∏—Ç

5. ‚ùå **–ë—É–ª–æ:** –ù–µ–º–∞—î –≤—ñ–∑—É–∞–ª—å–Ω–æ—ó —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó –ª—ñ–º—ñ—Ç—ñ–≤
6. ‚úÖ **–°—Ç–∞–ª–æ:** –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è AuthModal –∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

7. ‚ùå **–ë—É–ª–æ:** –ù–µ–º–∞—î –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
8. ‚úÖ **–°—Ç–∞–ª–æ:** –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫—Ä–æ–∫—ñ–≤

9. ‚ùå **–ë—É–ª–æ:** –ü–æ–∫–∞–∑—É–≤–∞–ª–∏—Å—è –Ω–µ—á—ñ—Ç–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ ("Invalid request data")
10. ‚úÖ **–°—Ç–∞–ª–æ:** –ó—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ç–∞ –ø–æ—Ä–∞–¥–∞–º–∏

## –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫:

### –¢–∏–ø–∏ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ —ó—Ö –æ–±—Ä–æ–±–∫–∞:

**1. INVALID_FLIGHT_FORMAT:**

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "Invalid Flight Number"
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** –ü–æ—è—Å–Ω–µ–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—É + –ø—Ä–∏–∫–ª–∞–¥–∏ (AA100, DL456, UA2457, BA212)
- **–ö–æ–ª—ñ—Ä:** –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π (warning)

**2. FLIGHT_NOT_FOUND:**

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "Flight Not Found"
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** –ü–æ—è—Å–Ω–µ–Ω–Ω—è —â–æ —Ä–µ–π—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ + –ø–æ—Ä–∞–¥–∏
- **–ö–æ–ª—ñ—Ä:** –°–∏–Ω—ñ–π (info)
- **–î—ñ—è:** –ö–Ω–æ–ø–∫–∞ "Check Flight Status" ‚Üí FlightRadar24

**3. ROUTE_DATA_INCOMPLETE:**

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "Route Data Unavailable"
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–æ —á–∞—Ä—Ç–µ—Ä–Ω—ñ —Ä–µ–π—Å–∏ —á–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö
- **–ö–æ–ª—ñ—Ä:** –°–∏–Ω—ñ–π (info)

**4. SERVER_ERROR:**

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** "Service Temporarily Unavailable"
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:** –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–∏–º—á–∞—Å–æ–≤—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
- **–ö–æ–ª—ñ—Ä:** –ß–µ—Ä–≤–æ–Ω–∏–π (error)

### –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è:

**–î–æ–¥–∞–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ TurbulenceForm:**

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–≤–∂–∏–Ω–∏ (3-10 —Å–∏–º–≤–æ–ª—ñ–≤)
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É (2-3 –±—É–∫–≤–∏ + 1-4 —Ü–∏—Ñ—Ä–∏)
- –ñ–∏–≤–µ –æ—á–∏—â–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –≤–≤–µ–¥–µ–Ω–Ω—ñ
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è–º –∑–∞–ø–∏—Ç—É
